/**
 * @fileoverview Firestore Security Rules for the St. Lucia Elections Hub application.
 *
 * Core Philosophy:
 * This ruleset prioritizes Authorization Independence, avoiding hierarchical authorization dependencies
 * and denormalizing data where necessary to minimize `get()` calls. All data is organized in
 * top-level collections. Access control is primarily role-based, with the possibility to expand to
 * owner-based access where appropriate (e.g., if user-specific data is added).
 *
 * Data Structure:
 * - /parties/{partyId}: Stores information about political parties.
 * - /candidates/{candidateId}: Stores information about candidates.
 * - /elections/{electionId}: Stores information about elections.
 * - /polling_data/{pollingDataId}: Stores polling data for elections.
 * - /constituencies/{constituencyId}: Stores information about constituencies.
 * - /election_results/{electionResultId}: Stores election results.
 * - /settings/pageLayouts: Stores user-defined layouts for various pages.
 *
 * Key Security Decisions:
 * - Read access to all collections is public.
 * - Write access to all collections is denied in this prototype.
 * - Future iterations may implement role-based access control for write operations.
 * - No user-specific data is currently stored, so owner-based rules are not implemented.
 * - The 'settings' collection is used to store configurations and also has public read access.
 *
 * Denormalization for Authorization:
 * Not applicable in this prototype, as all access is public read or denied write. Future iterations
 * may denormalize role information into documents if role-based access control is implemented.
 *
 * Structural Segregation:
 * Data with similar access needs (public read) is placed in separate top-level collections.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read party information. Write operations are not allowed in this prototype.
     * @path /parties/{partyId}
     * @allow (get, list): Any user can read party data.
     * @deny (create, update, delete): No one can modify party data in this prototype.
     * @principle Public read access for party information.
     */
    match /parties/{partyId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read candidate information. Write operations are not allowed in this prototype.
     * @path /candidates/{candidateId}
     * @allow (get, list): Any user can read candidate data.
     * @deny (create, update, delete): No one can modify candidate data in this prototype.
     * @principle Public read access for candidate information.
     */
    match /candidates/{candidateId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read election information. Write operations are not allowed in this prototype.
     * @path /elections/{electionId}
     * @allow (get, list): Any user can read election data.
     * @deny (create, update, delete): No one can modify election data in this prototype.
     * @principle Public read access for election information.
     */
    match /elections/{electionId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read polling data. Write operations are not allowed in this prototype.
     * @path /polling_data/{pollingDataId}
     * @allow (get, list): Any user can read polling data.
     * @deny (create, update, delete): No one can modify polling data in this prototype.
     * @principle Public read access for polling data.
     */
    match /polling_data/{pollingDataId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read constituency information. Write operations are not allowed in this prototype.
     * @path /constituencies/{constituencyId}
     * @allow (get, list): Any user can read constituency data.
     * @deny (create, update, delete): No one can modify constituency data in this prototype.
     * @principle Public read access for constituency information.
     */
    match /constituencies/{constituencyId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read election result information. Write operations are not allowed in this prototype.
     * @path /election_results/{electionResultId}
     * @allow (get, list): Any user can read election result data.
     * @deny (create, update, delete): No one can modify election result data in this prototype.
     * @principle Public read access for election result information.
     */
    match /election_results/{electionResultId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Allows anyone to read page layout settings. Write operations are not allowed in this prototype.
     * @path /settings/pageLayouts
     * @allow (get, list): Any user can read page layout settings.
     * @deny (create, update, delete): No one can modify page layout settings in this prototype.
     * @principle Public read access for page layout settings.
     */
    match /settings/pageLayouts {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

        /**
     * @description Allows anyone to read site settings. Write operations are not allowed in this prototype.
     * @path /settings/site
     * @allow (get, list): Any user can read site settings.
     * @deny (create, update, delete): No one can modify site settings in this prototype.
     * @principle Public read access for site settings.
     */
    match /settings/site {
          allow get, list: if true;
          allow create: if false;
          allow update: if false;
          allow delete: if false;
    }
  }
}