/**
 * @fileoverview Firestore Security Rules for the Revolucianize application.
 *
 * Core Philosophy:
 * This ruleset prioritizes security by default, enforcing strict access control.
 * Public read access is granted only where explicitly intended. Write access is always restricted.
 *
 * Data Structure:
 * - Top-level collections store core data entities like parties, candidates, events, news, etc.
 * - Subcollections are used to organize data related to parent documents (e.g., comments under a news article).
 *
 * Key Security Decisions:
 * - User listing is generally disallowed.
 * - Public read access is granted only for a few collections: events.
 * - Write access to all collections is explicitly controlled.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read events. Writes are disallowed.
     * @path /databases/{database}/documents/events
     * @allow (get, list): if true
     * @deny (create, update, delete): if false
     * @principle Grants public read access to events, but restricts write access.
     */
    match /events/{eventId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Prevents all access to mailing list subscribers.
     * @path /databases/{database}/documents/mailing_list_subscribers
     * @allow (get, list, create, update, delete): if false
     * @principle Secures mailing list subscriber data by denying all access.
     */
    match /mailing_list_subscribers/{subscriberId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to parties.
     * @path /databases/{database}/documents/parties
     * @allow (get, list, create, update, delete): if false
     * @principle Secures party data by denying all access.
     */
    match /parties/{partyId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to party logos.
     * @path /databases/{database}/documents/party_logos
     * @allow (get, list, create, update, delete): if false
     * @principle Secures party logo data by denying all access.
     */
    match /party_logos/{partyLogoId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to candidates.
     * @path /databases/{database}/documents/candidates
     * @allow (get, list, create, update, delete): if false
     * @principle Secures candidate data by denying all access.
     */
    match /candidates/{candidateId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to archived candidates.
     * @path /databases/{database}/documents/archived_candidates
     * @allow (get, list, create, update, delete): if false
     * @principle Secures archived candidate data by denying all access.
     */
    match /archived_candidates/{archivedCandidateId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to elections.
     * @path /databases/{database}/documents/elections
     * @allow (get, list, create, update, delete): if false
     * @principle Secures election data by denying all access.
     */
    match /elections/{electionId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to polling data.
     * @path /databases/{database}/documents/polling_data
     * @allow (get, list, create, update, delete): if false
     * @principle Secures polling data by denying all access.
     */
    match /polling_data/{pollingDataId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to constituencies.
     * @path /databases/{database}/documents/constituencies
     * @allow (get, list, create, update, delete): if false
     * @principle Secures constituency data by denying all access.
     */
    match /constituencies/{constituencyId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to election results.
     * @path /databases/{database}/documents/election_results
     * @allow (get, list, create, update, delete): if false
     * @principle Secures election results data by denying all access.
     */
    match /election_results/{electionResultId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to page layouts.
     * @path /databases/{database}/documents/settings/pageLayouts
     * @allow (get, list, create, update, delete): if false
     * @principle Secures page layouts data by denying all access.
     */
    match /settings/pageLayouts {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to site settings.
     * @path /databases/{database}/documents/settings/site
     * @allow (get, list, create, update, delete): if false
     * @principle Secures site settings data by denying all access.
     */
    match /settings/site {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to user activity.
     * @path /databases/{database}/documents/user_activity
     * @allow (get, list, create, update, delete): if false
     * @principle Secures user activity data by denying all access.
     */
    match /user_activity/{activityId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to regions.
     * @path /databases/{database}/documents/regions
     * @allow (get, list, create, update, delete): if false
     * @principle Secures region data by denying all access.
     */
    match /regions/{regionId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to user maps.
     * @path /databases/{database}/documents/user_maps
     * @allow (get, list, create, update, delete): if false
     * @principle Secures user map data by denying all access.
     */
    match /user_maps/{userMapId} {
      allow get, list, create, update, delete: if false;
    }

    /**
     * @description Prevents all access to ads.
     * @path /databases/{database}/documents/ads
     * @allow (get, list, create, update, delete): if false
     * @principle Secures ad data by denying all access.
     */
    match /ads/{adId} {
      allow get, list, create, update, delete: if false;
    }

   /**
     * @description Prevents all access to news articles.
     * @path /databases/{database}/documents/news
     * @allow (get, list, create, update, delete): if false
     * @principle Secures news article data by denying all access.
     */
    match /news/{newsId} {
      allow get, list, create, update, delete: if false;

        /**
         * @description Prevents all access to news article comments.
         * @path /databases/{database}/documents/news/{newsId}/comments/{commentId}
         * @allow (get, list, create, update, delete): if false
         * @principle Secures news article comment data by denying all access.
         */
        match /comments/{commentId} {
          allow get, list, create, update, delete: if false;
        }
    }

    /**
     * @description Prevents all access to reports.
     * @path /databases/{database}/documents/reports
     * @allow (get, list, create, update, delete): if false
     * @principle Secures report data by denying all access.
     */
    match /reports/{reportId} {
        allow get, list, create, update, delete: if false;
    }
  }
}