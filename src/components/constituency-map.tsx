'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';
import type { Constituency } from '@/lib/types';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Users } from 'lucide-react';

interface ConstituencyMapProps {
  constituencies: Constituency[];
}

// Map constituency names from SVG to database IDs if they differ
// For now, we assume a direct match or can create a mapping here.
const nameToIdMap: { [key: string]: string | undefined } = {
    'Gros Islet': 'gros-islet',
    'Babonneau': 'babonneau',
    'Castries North': 'castries-north',
    'Castries East': 'castries-east',
    'Castries Central': 'castries-central',
    'Castries South East': 'castries-south-east',
    'Castries South': 'castries-south',
    'Anse La Raye Canaries': 'anse-la-raye-canaries',
    'Soufriere': 'soufriere',
    'Choiseul': 'choiseul',
    'Laborie': 'laborie',
    'Vieux Fort South': 'vieux-fort-south',
    'Vieux Fort North': 'vieux-fort-north',
    'Micoud South': 'micoud-south',
    'Micoud North': 'micoud-north',
    'Dennery South': 'dennery-south',
    'Dennery North': 'dennery-north',
};

const StLuciaSVGMap = ({ onConstituencyHover, onConstituencyClick, hoveredConstituency }: { 
    onConstituencyHover: (name: string | null) => void;
    onConstituencyClick: (name: string) => void;
    hoveredConstituency: string | null;
}) => {
    const constituencies = [
        { id: 'gros-islet', name: 'Gros Islet', path: 'M304.8 77.2l-10.4-2.8-1.2-11.2 5.2-1.6 3.2-4.4 12.8-4 4-2-2.8-4-8-1.6-4.4-4-2.4-12.8-1.6-11.6L292 24l-4.4-4.8-14.8-2.8-5.6-3.2-3.6 4.4-4.4-2.4-7.2 4-5.6 1.6-4.8 6-4 4.8v6l-2.4 4.8-5.2 6.8-5.2 4.4 2 2.8 1.6 8.8 6 5.6-2.4 2.8-8.4 2.4-4-1.6-2.8-4.4-1.2-8.4 1.2-4-2.4-1.6-4.4 1.6-10 1.2-4.8-3.6-1.6-4.8-6.4 1.2-3.2-2-4.8-1.2-11.6 1.6-8.4-6.8-2.4-4.4 4-10.4-4.4-3.6 2-4.4 2.4-13.6-10-6-3.2-8-6-4.8v-4.4l-4.8-4-2.8 1.2-1.6 3.6-8.4 2-5.6-2.4-5.6 1.6-3.2 4.8-1.2 4.8 4 6.4 2 2.4-1.6 2.8-4.8.8-1.6 2.8.4 2.4-4 2.8-2.4 5.2-4.4 8.8-2.8 2.8-4.4 4-3.2 4.8-4.8 4.4-3.2 8.4-5.2 6.8-5.6 6.8-2.8 1.6-4.4 6.4-1.2 4.4-5.6 4.8-2 6-4.4 2.8-3.6 4.8-6.8 5.6-4 2.8-5.6 9.2-4.4 4.4-.8 4.4-3.2 4.8 1.6 3.2 2.8-.8 3.2 1.6 4.4 4.4 3.2 4.8v4l3.6 2 4.4 4.4 4.8 2.4 2.8-1.2 5.2-4.8 2-2 4.4 1.2 2.8-2.8 3.2 1.6 3.2 3.6 4.8 2.4 5.2-2 4 1.6 2.8-2 1.6-1.6 4.4.8 3.6-2 5.2-5.2 1.2-3.2 3.6-1.2 4 1.6h5.2l2.4 2.8 4 2.4 3.6-2 3.2-4.4-1.2-3.2 2-3.2 3.6-1.6 2.8 2.4 4.4-1.2 3.2-3.2 2.8.8 4.4-1.6 3.6-3.2 2-3.2 1.6-2.4 2-2.8 2.8-1.2 2.8-2.4 1.6-1.6.8-2.4 1.2-2.8.8-3.2-1.6-3.2-2.4-2.4-2.8-1.6-1.6-2.4-2.4-.8-3.2-1.6-2.4-1.6-1.6-1.6-.8-1.6v-2l-1.6-1.2-1.6-2-1.6-1.6-2-1.2-1.6-.8-1.6-1.2-1.6-1.2-1.2-.8-1.2-1.2-.8-1.2-.8-.8-.4-1.2-.4-.8z' },
        { id: 'babonneau', name: 'Babonneau', path: 'M200.7 186.4l-3.2-1.6-2.8.8-1.6-3.2-4.4.8-4.4-3.2-3.6-4.8-2-6-5.6-4.8-1.2-4.4-4.4-6.4-2.8-1.6-5.6-6.8-5.2-6.8-3.2-8.4-4.8-4.4-4.4-4-2.8-2.8-4.4-8.8-2.4-5.2-4-2.8-2.4-5.2-4-2.8-1.6-.8-2.4 4-2.8 1.6-2.8 4-6.4-1.2-4.8-1.2-4.8-3.2-4.8-5.6-1.6-8.4-2-1.6-3.6-2.8-1.2-4.8-4-4.8-4.4-8-6-3.2-10-6-13.6-2.4-4.4-2-3.6 2-10.4 4.4-4.4-6.8 2.4-8.4-1.6-11.6-1.2-4.8-2-3.2 1.2-4-1.6-8.4-1.2-4.4-2.4-2.8-6-5.6-1.6-8.8-2-2.8 5.2-4.4 5.2-6.8 2.4-4.8v-6l4-4.8 4.8-6 7.2-4 4.4 2.4 3.6-4.4 5.6 3.2 14.8 2.8 4.4 4.8L292 24l1.6 11.6 2.4 12.8 4.4 4 8 1.6 2.8 4-4 2-12.8 4-3.2 4.4-5.2 1.6 1.2 11.2 10.4 2.8-1.6 1.6-1.6 2.4-2 2.8-1.6 3.2-2.8 4.4-2.8 5.2-2 5.6 1.2 4.4.8 2.4 2.8 4 3.6 4.4 4.8 2 2.8 1.2 4.8.8 3.2v3.6l-1.6 4-2.8 3.2-2.4 2.4-1.6 2.8-1.6 2-1.6 1.6-1.6.8-1.2.8-.8.8-.8.4-.8.4-.4.8-.4 1.2-.8 1.2-1.2 1.2-1.2.8-1.6 1.2-1.6 1.2-1.6.8-2 1.2-1.6 1.6-2 1.6-1.6 2-1.6 2.4-2.8 1.2-2.8 2.4-2.8 1.2-2 2.8-1.6 2.4-1.6-1.6-2.4.8-3.2-1.6-3.2-2.4-2.4-2.8-1.6-1.6-2.4-2.4-.8-3.2-1.6-2.4-1.6-1.6-1.6-.8-1.6v-2l-1.6-1.2-1.6-2-1.6-1.6-2-1.2-1.6-.8-1.6-1.2-1.6-1.2-1.2-.8-1.2-1.2-.8-1.2-.8-.8-.4-1.2-.4-.8v-1.6l-2-2.4-2.8-1.6-3.2-4.4-4-3.6-4.4-2-4.8-2.4-4.8-1.2-5.2.8-4.4 2.8-4.4 4-4 4.4-3.2 5.6-3.2 6.8-2 4.8-1.6 4.4-1.6 4.8.8 3.6-.8 4.8.8 5.2 2 5.6 2.8 4.8 3.2 4 3.6 2.8 2.8 2.4 2.4 1.6.8 2 1.2 2 2.4 2.4 4 2.8 4.8 2.8 5.6 2 6.4 1.6 6.8 1.2 5.2.4 4.4.8 4 .4 3.2 1.2 2.8-.4 2.8-1.2 2.4-1.6 2-1.6 2.4-1.2 2.8.4 2.8 1.6 2.4 2 2.4 2.8.8 2.8-1.2 2-1.6 2.4-2.4 1.6-2.8 1.2-3.6.4-4.4.4-4.8-.4-5.2-.8-4.4-1.6-4-1.6-3.6-2-3.2-2.4-2.8-2.4-2-2-1.6-1.6-1.2-1.2L202 184l-1.3-2.4z' },
        { id: 'castries-north', name: 'Castries North', path: 'M187.9 184l-1.2 1.2-1.6 1.6-2 2-2.4 2.4-2.4 2.8-2.8 2.4-3.2 2-3.6 1.6-4 1.6-4.4 1.6-4.8.8-5.2.4-4.8.4-4.4-.4-3.6-1.2-2.8-1.6-2.4-2.4-2-1.6-2.8 1.2-2.8.8-2.8-2.4-2-2.4-1.6-2.8.4-2.4.4-2.8-1.2-2.4.4-2.8.8-3.2 1.2-2.8.4-2.8-1.2-2.8-1.6-2.4-2-2-2-2.4-1.6-2.8-1.2-2.8-.8-2.8-.4-2.8.8-2.4 1.2-2.4 1.6-2 2-1.6 2.4-1.2 2.8-1.2 2.8v-2.8l-1.2-2.4-1.2-2.4-1.6-2-2-1.6-2.4-1.2-2.8-.8-3.2-.4h-4.4l-4.4.8-4 1.2-3.6 2-3.2 2.4-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8L120.3 84l-2 3.6-1.6 4-1.2 4.4-.8 4.8-.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8L202 184l1.3 2.4z' },
        { id: 'castries-east', name: 'Castries East', path: 'M133.5 214.8l1.6 2.4 1.6 2.4 1.2 2.8.8 2.8.4 2.8.4 2.8.8 2.8 1.2 2.8 1.6 2.4 2 2.4 2 2 2.4 1.6 2.8 1.2 2.8.8 2.8.4 2.8-.8 2.4-1.2-2.4-1.6-2-2-1.6-2.4-1.2-2.8-1.2-2.8v-2.8l-1.2-2.4-1.2-2.4-1.6-2-2-1.6-2.4-1.2-2.8-.8-3.2-.4h-4.4l-4.4.8-4 1.2-3.6 2-3.2 2.4-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'castries-central', name: 'Castries Central', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'castries-south-east', name: 'Castries South East', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8L120.3 84l-2 3.6-1.6 4-1.2 4.4-.8 4.8-.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'castries-south', name: 'Castries South', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'anse-la-raye-canaries', name: 'Anse La Raye Canaries', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'soufriere', name: 'Soufriere', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8 3.2-2.4 3.6-2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'choiseul', name: 'Choiseul', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'laborie', name: 'Laborie', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'vieux-fort-south', name: 'Vieux Fort South', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'vieux-fort-north', name: 'Vieux Fort North', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'micoud-south', name: 'Micoud South', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'micoud-north', name: 'Micoud North', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'dennery-south', name: 'Dennery South', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
        { id: 'dennery-north', name: 'Dennery North', path: 'M133.5 214.8l-3.2 2.8-2.8 3.2-2.4 3.6-2 4-1.6 4.4-1.2 4.8-.8 5.2.4 5.6.8 4.8 1.2 4.4 1.6 4 2 3.6 2.4 3.2 2.8 2.8 3.2 2.4 3.6 2 4 1.6 4.4 1.2 4.8.8 5.2-.4 5.6-.8 4.8-1.2 4.4-1.6 4-2 3.6-2.4 3.2-2.8 2.8-3.2 2.4-3.6 2-4-1.6-4.4-1.2-4.8-.8-5.2.4-5.6.8-4.8 1.2-4.4 1.6-4 2-3.6 2.4-3.2 2.8-2.8z' },
    ];
    
    return (
        <svg
            viewBox="0 0 400 600"
            className="w-full h-auto"
            onMouseLeave={() => onConstituencyHover(null)}
        >
            <g>
                {constituencies.map((c) => (
                    <path
                        key={c.id}
                        d={c.path}
                        className={`cursor-pointer transition-colors duration-200 ${
                            hoveredConstituency === c.name ? 'fill-primary' : 'fill-muted-foreground'
                        }`}
                        onMouseEnter={() => onConstituencyHover(c.name)}
                        onClick={() => onConstituencyClick(c.name)}
                    />
                ))}
            </g>
        </svg>
    );
};


export function ConstituencyMap({ constituencies }: ConstituencyMapProps) {
  const [hovered, setHovered] = useState<string | null>(null);
  const router = useRouter();

  const handleConstituencyClick = (name: string) => {
    const constituency = constituencies.find(c => c.name === name);
    if (constituency) {
      router.push(`/constituencies/${constituency.id}`);
    }
  };

  const hoveredData = hovered
    ? constituencies.find((c) => c.name === hovered)
    : null;

  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
      <div className="md:col-span-2">
        <Card>
          <CardContent className="p-2">
            <StLuciaSVGMap 
                onConstituencyHover={setHovered}
                onConstituencyClick={handleConstituencyClick}
                hoveredConstituency={hovered}
            />
          </CardContent>
        </Card>
      </div>
      <div>
        <Card className="sticky top-24">
          <CardHeader>
            <CardTitle className="font-headline">Constituency Info</CardTitle>
          </CardHeader>
          <CardContent>
            {hoveredData ? (
              <div className="space-y-4">
                <h3 className="text-xl font-semibold text-primary">{hoveredData.name}</h3>
                <div className="flex items-center text-md">
                  <Users className="w-4 h-4 mr-2 text-primary" />
                  <span className="font-semibold mr-2">Voters:</span>
                  <span>{hoveredData.demographics.registeredVoters.toLocaleString()}</span>
                </div>
                 <Button onClick={() => handleConstituencyClick(hoveredData.name)} className="w-full mt-4">
                    View Details
                </Button>
              </div>
            ) : (
              <p className="text-muted-foreground">Hover over a constituency on the map to see its details.</p>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
