'use client';

import { useMemo } from 'react';
import type { Constituency, ElectionResult, Election, PartyLogo } from '@/lib/types';
import { cn } from '@/lib/utils';
import { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';
import { ConstituencyPopoverContent } from '@/components/constituency-popover-content';

interface InteractiveSvgMapProps {
    constituencies: Constituency[];
    selectedConstituencyId: string | null;
    election?: Election | null;
    onConstituencyClick: (id: string) => void;
    onLeaningChange?: (id: string, leaning: string) => void;
    onPredictionChange?: (id: string, slp: number, uwp: number) => void;
    electionResults?: ElectionResult[];
    previousElectionResults?: ElectionResult[];
    previousElection?: Election | null;
    partyLogos?: PartyLogo[];
    isMakeYourOwn?: boolean;
    hideLogos?: boolean;
    popoverVariant?: 'default' | 'dashboard';
}

const politicalLeaningOptions = [
  { value: 'solid-uwp', label: 'Solid UWP', color: '#facc15' }, // yellow-400
  { value: 'lean-uwp', label: 'Lean UWP', color: '#fde047' }, // yellow-300
  { value: 'tossup', label: 'Tossup', color: '#a855f7' }, // purple-500
  { value: 'lean-slp', label: 'Lean SLP', color: '#f87171' }, // red-400
  { value: 'solid-slp', label: 'Solid SLP', color: '#dc2626' }, // red-600
];

const makeYourOwnLeaningOptions = [
  { value: 'slp', label: 'SLP', color: '#ef4444' }, // red-500
  { value: 'uwp', label: 'UWP', color: '#f59e0b' }, // amber-500
  { value: 'ind', label: 'IND', color: '#3b82f6' }, // blue-500
  { value: 'unselected', label: 'To be selected', color: '#d1d5db' }, // gray-300
];


const getLeaningInfo = (leaning: string | undefined, isMakeYourOwn?: boolean) => {
    const options = isMakeYourOwn ? makeYourOwnLeaningOptions : politicalLeaningOptions;
    const defaultLeaningValue = isMakeYourOwn ? 'unselected' : 'tossup';
    const defaultLeaning = options.find(o => o.value === defaultLeaningValue)!;
    const leaningInfo = options.find(o => o.value === leaning) || defaultLeaning;
    return { color: leaningInfo.color };
};

const SVGPaths: Record<string, string> = {
    "Micoud North": `M 419.00,979.00 C 417.11,972.86 413.53,972.19 408.00,969.50 403.22,967.19 386.81,962.54 384.60,960.23 383.13,958.71 382.64,955.23 381.68,953.00 380.85,951.09 379.59,949.20 379.49,947.05 379.27,942.43 384.68,941.60 388.00,940.29 391.39,938.95 405.51,930.39 407.86,927.91 413.91,921.50 413.89,909.86 417.31,906.47 419.40,904.40 428.45,901.27 432.00,899.50 432.00,899.50 452.00,889.58 452.00,889.58 452.00,889.58 459.00,888.55 459.00,888.55 469.46,886.29 479.95,884.19 490.00,880.29 493.76,878.83 498.89,876.19 502.00,873.66 507.50,869.20 509.90,864.00 518.00,865.15 521.15,865.59 522.31,866.75 525.00,868.09 539.47,875.32 539.45,880.72 547.04,886.43 553.01,890.92 566.59,893.12 574.00,893.00 580.67,892.89 580.24,891.66 585.00,891.13 587.79,890.81 591.32,891.33 593.91,890.42 593.91,890.42 599.17,887.58 599.17,887.58 600.85,886.96 611.94,885.04 614.00,885.00 627.40,884.79 625.67,887.16 637.00,891.89 637.00,891.89 650.96,896.69 650.96,896.69 658.73,899.68 654.47,900.98 665.00,901.00 665.00,901.00 675.00,901.00 675.00,901.00 681.53,901.04 695.12,904.44 699.58,909.27 701.09,910.91 701.32,912.02 702.00,914.15 700.32,913.94 696.73,913.59 695.31,914.15 690.49,916.76 694.32,922.71 697.00,925.00 697.66,930.69 703.23,930.53 708.00,930.84 714.24,931.24 714.59,929.21 719.00,928.30 722.38,927.60 726.83,928.51 730.00,927.41 730.00,927.41 737.00,923.60 737.00,923.60 739.49,922.72 752.55,922.66 754.96,923.60 757.12,924.44 757.60,925.36 759.00,927.00 755.95,927.00 747.60,926.51 745.31,928.02 742.90,929.62 743.33,932.19 741.41,934.87 739.55,937.47 731.02,943.37 740.02,944.93 740.02,944.93 743.00,944.93 743.00,944.93 742.31,948.05 738.98,954.35 740.15,956.57 741.66,959.45 746.49,958.87 749.00,957.97 749.00,957.97 764.00,949.89 764.00,949.89 764.00,949.89 776.00,948.00 776.00,948.00 776.00,948.00 776.00,953.00 776.00,953.00 768.75,955.21 766.78,963.68 762.00,968.00 762.00,968.00 764.00,970.00 764.00,970.00 754.18,969.55 750.66,967.32 741.00,973.00 741.00,973.00 734.00,971.00 734.00,971.00 734.00,971.00 737.00,975.00 737.00,975.00 737.32,976.56 741.81,989.96 744.00,985.00 751.01,984.92 749.53,982.39 757.00,986.00 757.00,986.00 751.08,992.77 751.08,992.77 751.08,992.77 743.08,997.38 743.08,997.38 743.08,997.38 744.28,1007.00 744.28,1007.00 744.28,1007.00 740.30,1015.00 740.30,1015.00 740.30,1015.00 739.00,1024.00 739.00,1024.00 749.89,1026.78 750.99,1025.77 751.00,1037.00 751.00,1037.00 745.00,1035.55 745.00,1035.55 740.22,1034.93 736.21,1038.11 738.83,1043.00 740.96,1046.97 747.43,1051.39 751.00,1057.00 740.34,1057.63 736.22,1054.77 732.00,1062.00 732.00,1062.00 738.00,1066.00 738.00,1066.00 732.77,1066.00 728.81,1066.45 724.00,1064.00 724.00,1064.00 730.00,1064.00 730.00,1064.00 730.00,1064.00 721.00,1061.74 721.00,1061.74 712.88,1061.08 706.01,1069.55 713.33,1075.89 719.44,1081.18 723.22,1076.83 730.00,1081.19 732.13,1082.56 736.37,1085.23 736.37,1088.03 736.37,1092.61 729.63,1094.70 726.00,1094.95 715.78,1095.64 714.26,1090.79 707.00,1089.78 700.11,1088.38 699.54,1093.04 689.00,1089.78 691.34,1093.50 693.05,1092.95 697.00,1093.00 697.00,1093.00 701.00,1103.00 701.00,1103.00 701.00,1103.00 698.00,1104.00 698.00,1104.00 698.00,1104.00 703.00,1105.00 703.00,1105.00 703.00,1105.00 698.00,1105.00 698.00,1105.00 698.00,1105.00 701.00,1108.00 701.00,1108.00 701.00,1108.00 704.41,1115.00 704.41,1115.00 705.40,1117.87 704.51,1121.44 706.60,1123.36 710.30,1126.78 718.32,1118.83 719.00,1117.00 719.00,1117.00 728.00,1119.62 728.00,1119.62 728.00,1119.62 732.00,1121.71 732.00,1121.71 733.78,1122.52 741.61,1124.53 737.38,1127.98 735.64,1129.41 729.37,1128.99 727.00,1129.00 721.96,1129.02 712.86,1130.79 709.91,1135.30 708.89,1136.87 709.06,1138.26 709.00,1140.00 709.00,1140.00 706.00,1141.00 706.00,1141.00 706.00,1141.00 709.00,1142.00 709.00,1142.00 707.58,1142.24 705.40,1142.71 704.00,1142.51 699.37,1141.84 692.12,1132.70 688.00,1129.45 688.00,1129.45 675.00,1118.26 675.00,1118.26 675.00,1118.26 668.00,1112.87 668.00,1112.87 668.00,1112.87 639.00,1084.00 639.00,1084.00 635.84,1080.85 632.40,1076.83 628.00,1075.57 628.00,1075.57 617.00,1074.85 617.00,1074.85 612.06,1073.49 609.45,1071.35 605.00,1074.85 605.00,1074.85 602.00,1074.85 602.00,1074.85 599.06,1071.43 596.09,1073.89 592.00,1072.00 584.22,1068.39 576.36,1056.46 567.00,1060.00 567.00,1060.00 565.00,1058.00 565.00,1058.00 562.34,1060.10 559.81,1058.36 558.00,1056.00 558.00,1056.00 552.00,1055.00 552.00,1055.00 549.29,1049.28 546.50,1046.34 540.00,1048.00 540.00,1048.00 535.00,1045.00 535.00,1045.00 535.00,1045.00 535.00,1043.00 535.00,1043.00 535.00,1043.00 528.00,1041.00 528.00,1041.00 524.40,1033.40 515.89,1029.97 509.00,1025.80 509.00,1025.80 494.00,1016.53 494.00,1016.53 494.00,1016.53 463.00,1000.93 463.00,1000.93 455.91,997.03 448.51,989.72 440.00,992.00 440.00,992.00 437.00,989.00 437.00,989.00 435.43,982.62 425.87,977.98 420.00,976.00 420.00,976.00 419.00,979.00 419.00,979.00 Z M 713.00,1062.00 C 713.00,1062.00 712.00,1062.00 712.00,1062.00 712.00,1062.00 713.00,1063.00 713.00,1063.00 713.00,1063.00 713.00,1062.00 713.00,1062.00 Z M 710.00,1067.00 C 710.00,1067.00 709.00,1067.00 709.00,1067.00 709.00,1067.00 710.00,1068.00 710.00,1068.00 710.00,1068.00 710.00,1067.00 710.00,1067.00 Z`,
    "Micoud South": `M 324.00,1038.00 C 324.00,1038.00 335.41,1033.40 335.41,1033.40 337.21,1031.62 336.91,1028.82 338.31,1026.09 338.31,1026.09 345.76,1015.00 345.76,1015.00 345.76,1015.00 362.37,993.00 362.37,993.00 362.37,993.00 366.77,986.00 366.77,986.00 370.41,980.66 377.32,967.25 384.00,966.52 387.07,966.18 402.68,971.45 406.00,973.03 406.00,973.03 418.00,980.04 418.00,980.04 418.00,980.04 425.00,982.85 425.00,982.85 425.00,982.85 436.00,990.66 436.00,990.66 436.00,990.66 452.00,999.89 452.00,999.89 452.00,999.89 463.00,1005.55 463.00,1005.55 463.00,1005.55 475.00,1012.46 475.00,1012.46 481.26,1015.35 486.88,1016.96 493.00,1020.71 493.00,1020.71 513.00,1033.29 513.00,1033.29 513.00,1033.29 521.91,1038.12 521.91,1038.12 521.91,1038.12 530.01,1044.25 530.01,1044.25 530.01,1044.25 544.96,1051.55 544.96,1051.55 549.55,1054.26 550.07,1056.45 556.00,1059.32 561.54,1062.00 564.99,1060.44 574.00,1065.04 574.00,1065.04 591.00,1076.79 591.00,1076.79 594.96,1078.85 598.92,1076.84 603.00,1076.79 607.79,1076.34 612.23,1078.35 616.00,1078.55 619.06,1078.68 623.89,1077.33 626.66,1078.55 628.94,1079.59 630.61,1083.01 632.26,1085.00 632.26,1085.00 645.00,1098.00 645.00,1098.00 645.00,1098.00 653.00,1105.74 653.00,1105.74 653.00,1105.74 660.00,1111.13 660.00,1111.13 660.00,1111.13 668.00,1118.87 668.00,1118.87 668.00,1118.87 676.00,1125.13 676.00,1125.13 676.00,1125.13 688.00,1137.00 688.00,1137.00 697.92,1146.92 703.29,1148.60 705.00,1163.00 705.00,1163.00 703.00,1163.00 703.00,1163.00 703.00,1163.00 703.00,1166.00 703.00,1166.00 703.00,1166.00 702.00,1164.00 702.00,1164.00 702.60,1168.53 701.65,1179.85 700.00,1184.00 700.00,1184.00 699.00,1178.00 699.00,1178.00 698.77,1188.06 696.38,1186.84 692.54,1195.00 689.87,1200.70 689.75,1205.20 688.23,1208.99 686.61,1213.05 683.83,1216.64 683.18,1221.09 682.65,1222.75 682.94,1233.40 683.18,1235.00 683.18,1235.00 686.00,1242.00 686.00,1242.00 686.00,1242.00 696.00,1242.00 696.00,1242.00 696.00,1242.00 696.00,1239.00 696.00,1239.00 696.00,1239.00 710.00,1237.00 710.00,1237.00 710.00,1237.00 707.00,1253.00 707.00,1253.00 707.00,1253.00 683.00,1253.91 683.00,1253.91 683.00,1253.91 662.00,1253.91 662.00,1253.91 660.77,1250.81 653.29,1249.34 650.00,1247.74 650.00,1247.74 633.00,1237.43 633.00,1237.43 629.11,1236.42 622.45,1237.90 618.00,1238.00 615.27,1230.06 606.10,1232.40 600.00,1233.34 595.61,1234.25 594.07,1233.00 590.00,1233.34 590.00,1233.34 573.00,1234.00 573.00,1234.00 573.00,1234.00 550.00,1233.00 550.00,1233.00 550.00,1233.00 550.00,1236.00 550.00,1236.00 550.00,1236.00 544.00,1236.00 544.00,1236.00 544.00,1236.00 538.18,1230.66 538.18,1230.66 538.18,1230.66 534.00,1222.00 534.00,1222.00 523.95,1222.80 521.82,1214.17 508.00,1214.00 500.01,1213.91 488.20,1214.21 481.02,1210.24 476.13,1207.53 476.41,1205.00 473.47,1201.09 470.32,1196.88 469.18,1197.61 466.00,1192.00 466.00,1192.00 464.00,1193.00 464.00,1193.00 464.00,1193.00 463.00,1192.00 463.00,1192.00 462.11,1185.80 454.95,1179.60 450.00,1176.00 450.00,1176.00 451.00,1178.00 451.00,1178.00 451.00,1178.00 439.00,1169.00 439.00,1169.00 439.00,1169.00 440.00,1166.00 440.00,1166.00 435.37,1163.30 433.86,1159.21 434.00,1154.00 434.00,1154.00 421.00,1145.00 421.00,1145.00 421.00,1145.00 422.00,1142.00 422.00,1142.00 422.00,1142.00 416.00,1136.00 416.00,1136.00 416.00,1136.00 414.00,1138.00 414.00,1138.00 414.00,1138.00 392.00,1115.00 392.00,1115.00 392.00,1115.00 394.00,1116.00 394.00,1116.00 394.00,1116.00 389.00,1113.00 389.00,1113.00 389.00,1113.00 390.00,1110.00 390.00,1110.00 390.00,1110.00 388.00,1111.00 388.00,1111.00 388.00,1111.00 388.00,1107.00 388.00,1107.00 388.00,1107.00 378.00,1104.00 378.00,1104.00 378.00,1104.00 379.00,1098.00 379.00,1098.00 376.44,1097.18 376.92,1096.55 377.00,1094.00 367.10,1088.90 357.27,1076.26 349.00,1068.00 344.81,1063.81 340.32,1060.92 339.00,1055.00 339.00,1055.00 337.00,1056.00 337.00,1056.00 335.55,1048.29 328.78,1043.87 324.00,1038.00 Z M 391.00,1112.00 C 391.00,1112.00 390.00,1112.00 390.00,1112.00 390.00,1112.00 391.00,1113.00 391.00,1113.00 391.00,1113.00 391.00,1112.00 391.00,1112.00 Z M 432.00,1152.00 C 432.00,1152.00 431.00,1152.00 431.00,1152.00 431.00,1152.00 432.00,1153.00 432.00,1153.00 432.00,1153.00 432.00,1152.00 432.00,1152.00 Z M 702.00,1168.00 C 702.00,1168.00 701.00,1168.00 701.00,1168.00 701.00,1168.00 702.00,1169.00 702.00,1169.00 702.00,1169.00 702.00,1168.00 702.00,1168.00 Z M 701.00,1174.00 C 701.00,1174.00 700.00,1174.00 700.00,1174.00 700.00,1174.00 701.00,1175.00 701.00,1175.00 701.00,1175.00 701.00,1174.00 701.00,1174.00 Z M 465.00,1191.00 C 465.00,1191.00 464.00,1191.00 464.00,1191.00 464.00,1191.00 465.00,1192.00 465.00,1192.00 465.00,1192.00 465.00,1191.00 465.00,1191.00 Z M 682.00,1224.00 C 680.75,1227.17 680.75,1228.83 682.00,1232.00 682.00,1232.00 682.00,1224.00 682.00,1224.00 Z M 534.00,1225.00 C 534.00,1225.00 535.00,1225.00 535.00,1225.00 535.00,1225.00 534.00,1226.00 534.00,1226.00 534.00,1226.00 534.00,1225.00 534.00,1225.00 Z M 537.00,1227.00 C 537.00,1227.00 536.00,1227.00 536.00,1227.00 536.00,1227.00 537.00,1228.00 537.00,1228.00 537.00,1228.00 537.00,1227.00 537.00,1227.00 Z M 538.00,1228.00 C 538.00,1228.00 537.00,1228.00 537.00,1228.00 537.00,1228.00 538.00,1229.00 538.00,1229.00 538.00,1229.00 538.00,1228.00 538.00,1228.00 Z`,
    "Vieux-Fort North": `M 373.00,1382.00 C 375.85,1375.25 375.00,1370.17 375.00,1363.00 375.00,1363.00 375.00,1333.00 375.00,1333.00 375.02,1322.93 378.98,1321.07 379.00,1311.00 379.00,1311.00 379.00,1256.00 379.00,1256.00 378.98,1244.50 376.69,1247.09 372.57,1238.00 372.57,1238.00 369.18,1227.00 369.18,1227.00 368.10,1224.45 357.75,1210.37 355.68,1208.18 355.68,1208.18 348.09,1201.82 348.09,1201.82 344.79,1198.66 333.46,1184.12 331.84,1180.00 331.21,1178.41 329.59,1171.56 329.73,1170.00 330.08,1165.85 332.86,1165.36 333.00,1157.00 333.00,1157.00 333.00,1146.00 333.00,1146.00 332.79,1133.70 321.98,1128.05 315.57,1119.00 311.24,1112.89 311.83,1108.56 310.74,1102.00 310.74,1102.00 309.51,1097.00 309.51,1097.00 308.11,1087.40 320.46,1075.15 318.72,1066.00 317.77,1061.00 313.18,1057.05 309.00,1054.59 306.38,1053.05 301.77,1051.71 302.08,1047.95 302.28,1045.34 310.05,1032.43 312.34,1031.31 313.86,1030.49 315.44,1030.67 316.96,1031.31 323.15,1034.15 326.61,1044.79 330.47,1050.00 330.47,1050.00 335.42,1056.00 335.42,1056.00 337.54,1059.18 336.79,1060.07 340.14,1064.00 340.14,1064.00 364.00,1088.00 364.00,1088.00 371.13,1095.08 378.26,1096.55 377.00,1108.00 379.01,1108.50 383.26,1109.13 384.74,1110.01 388.25,1112.11 396.79,1122.67 400.03,1126.01 400.03,1126.01 414.00,1139.83 414.00,1139.83 414.00,1139.83 422.36,1147.12 422.36,1147.12 433.48,1159.68 430.94,1162.70 438.02,1170.00 444.92,1177.11 445.23,1175.19 449.24,1178.84 449.24,1178.84 461.48,1191.58 461.48,1191.58 461.48,1191.58 465.26,1196.85 465.26,1196.85 470.10,1202.55 472.89,1203.31 476.00,1211.00 476.00,1211.00 479.00,1210.00 479.00,1210.00 479.00,1210.00 480.00,1213.00 480.00,1213.00 484.78,1212.24 494.47,1214.30 500.00,1214.94 500.00,1214.94 509.00,1214.94 509.00,1214.94 513.14,1215.23 515.65,1215.38 518.00,1219.00 518.00,1219.00 521.00,1218.00 521.00,1218.00 526.41,1224.25 526.05,1220.24 531.25,1225.06 537.23,1230.61 536.96,1234.56 542.01,1236.41 547.39,1238.37 556.32,1235.01 563.00,1235.00 575.47,1234.98 585.72,1234.18 598.00,1237.00 599.71,1234.98 600.52,1234.86 603.02,1233.93 614.07,1229.81 610.67,1238.74 623.00,1239.00 634.36,1239.23 632.22,1240.41 641.00,1246.24 643.75,1248.07 650.84,1251.51 654.00,1252.66 657.03,1253.75 668.18,1256.89 671.00,1256.89 675.73,1256.89 679.89,1253.91 688.00,1255.15 693.60,1256.00 692.78,1258.84 700.00,1260.00 695.04,1265.80 688.58,1264.81 682.00,1262.79 679.40,1262.00 673.64,1261.19 672.17,1264.31 671.23,1266.30 672.64,1267.98 674.15,1269.11 678.36,1272.24 680.24,1270.10 685.00,1278.00 676.60,1279.39 677.01,1285.01 677.00,1292.00 677.00,1292.00 672.74,1288.97 672.74,1288.97 667.99,1286.57 663.51,1288.47 663.06,1294.00 662.22,1304.34 669.12,1304.55 670.76,1309.09 671.86,1312.14 667.96,1321.58 662.00,1321.72 656.64,1321.85 653.94,1316.08 650.97,1314.91 646.57,1313.17 644.99,1318.73 645.07,1322.00 645.24,1328.56 652.15,1336.41 640.00,1339.76 638.34,1339.95 636.69,1339.95 635.00,1339.76 635.00,1339.76 631.71,1330.00 631.71,1330.00 630.03,1324.08 629.75,1318.68 622.00,1318.17 615.69,1317.55 613.33,1320.16 610.13,1318.17 606.92,1316.39 605.09,1310.19 601.68,1307.60 599.39,1305.86 595.78,1305.82 593.00,1306.06 591.29,1306.20 589.75,1306.42 588.39,1307.60 585.06,1310.49 587.57,1313.97 585.35,1316.40 583.83,1318.08 581.02,1317.84 579.31,1319.02 576.54,1320.94 577.01,1325.02 577.00,1328.00 573.21,1328.01 569.43,1327.88 566.15,1330.15 561.74,1333.18 563.16,1338.64 567.19,1340.98 569.44,1342.28 572.47,1341.84 575.00,1342.26 582.92,1343.57 579.09,1344.00 589.00,1344.00 587.94,1350.10 585.95,1347.12 581.17,1351.26 581.17,1351.26 576.83,1355.71 576.83,1355.71 574.28,1357.93 572.37,1358.24 570.54,1360.30 570.54,1360.30 564.15,1371.00 564.15,1371.00 562.48,1373.87 560.72,1379.14 556.95,1379.43 551.53,1379.83 539.74,1369.76 536.09,1366.01 532.98,1362.82 530.95,1359.84 526.00,1360.17 520.72,1360.53 516.76,1365.32 513.00,1367.02 510.42,1368.18 507.76,1367.99 505.00,1368.00 505.00,1368.00 491.00,1368.00 491.00,1368.00 480.56,1368.07 483.75,1371.35 477.71,1373.52 471.27,1375.84 464.75,1375.89 458.00,1376.00 451.48,1376.11 452.82,1377.06 448.83,1377.95 448.83,1377.95 435.04,1377.95 435.04,1377.95 429.55,1378.79 432.68,1379.98 423.00,1380.06 423.00,1380.06 409.04,1380.06 409.04,1380.06 403.55,1380.79 406.68,1381.98 397.00,1382.00 397.00,1382.00 373.00,1382.00 373.00,1382.00 Z M 395.00,1120.00 C 395.00,1120.00 394.00,1120.00 394.00,1120.00 394.00,1120.00 395.00,1121.00 395.00,1121.00 395.00,1121.00 395.00,1120.00 395.00,1120.00 Z M 422.00,1147.00 C 422.00,1147.00 421.00,1147.00 421.00,1147.00 421.00,1147.00 422.00,1148.00 422.00,1148.00 422.00,1148.00 422.00,1147.00 422.00,1147.00 Z M 423.00,1148.00 C 423.00,1148.00 422.00,1148.00 422.00,1148.00 422.00,1148.00 423.00,1149.00 423.00,1149.00 423.00,1149.00 423.00,1148.00 423.00,1148.00 Z M 536.00,1231.00 C 536.00,1231.00 535.00,1231.00 535.00,1231.00 535.00,1231.00 536.00,1232.00 536.00,1232.00 536.00,1232.00 536.00,1231.00 536.00,1231.00 Z`,
    "Vieux-Fort South": `M 371.00,1382.00 C 371.00,1382.00 395.00,1383.00 395.00,1383.00 395.00,1383.00 405.00,1383.69 405.00,1383.69 405.00,1383.69 419.00,1381.02 419.00,1381.02 419.00,1381.02 432.72,1381.02 432.72,1381.02 432.72,1381.02 439.01,1379.93 439.01,1379.93 439.01,1379.93 448.00,1379.93 448.00,1379.93 448.00,1379.93 466.00,1377.37 466.00,1377.37 466.00,1377.37 473.00,1376.63 473.00,1376.63 473.00,1376.63 489.00,1369.90 489.00,1369.90 489.00,1369.90 503.00,1369.30 503.00,1369.30 503.00,1369.30 509.00,1370.70 509.00,1370.70 509.00,1370.70 519.00,1368.06 519.00,1368.06 519.00,1368.06 538.00,1378.00 538.00,1378.00 533.99,1385.93 529.41,1384.21 525.38,1389.48 525.38,1389.48 520.48,1398.00 520.48,1398.00 514.38,1407.25 509.12,1413.08 511.22,1425.00 511.22,1425.00 517.00,1440.00 517.00,1440.00 517.00,1440.00 504.04,1446.05 504.04,1446.05 499.48,1449.31 496.18,1454.46 492.76,1458.76 487.76,1465.04 485.92,1460.54 486.00,1473.00 486.05,1480.90 489.73,1484.65 493.66,1491.17 495.17,1493.68 496.12,1496.63 498.27,1498.70 499.33,1499.72 512.24,1506.41 513.97,1507.00 513.97,1507.00 513.97,1514.96 513.97,1514.96 513.97,1514.96 516.44,1521.17 516.44,1521.17 516.44,1521.17 514.00,1528.00 514.00,1528.00 509.54,1527.62 498.22,1528.34 494.00,1529.41 489.56,1530.54 487.08,1533.66 482.00,1532.57 477.92,1531.70 473.23,1527.94 470.55,1524.83 468.85,1522.86 466.56,1519.25 463.63,1519.17 458.75,1519.04 458.51,1528.67 451.98,1528.38 448.42,1528.23 430.02,1519.76 440.00,1512.00 440.00,1512.00 439.00,1508.77 439.00,1508.77 443.41,1509.58 447.77,1510.78 451.96,1508.77 457.07,1505.82 456.27,1502.26 458.00,1499.28 460.83,1494.43 464.62,1494.97 463.00,1484.00 463.00,1484.00 461.00,1484.00 461.00,1484.00 460.05,1485.48 457.00,1489.53 455.16,1486.38 454.10,1484.56 456.20,1481.97 456.39,1480.02 456.87,1475.11 451.60,1474.34 448.00,1474.00 447.69,1472.04 447.45,1469.82 446.63,1468.00 445.27,1464.97 438.01,1455.44 435.00,1454.19 435.20,1454.27 424.06,1452.70 420.00,1451.41 412.11,1448.89 407.75,1446.05 399.00,1447.30 388.24,1448.84 385.41,1453.26 374.00,1450.49 367.18,1448.84 366.51,1447.55 364.00,1441.00 367.49,1440.71 368.01,1440.97 370.00,1438.00 370.00,1438.00 378.00,1438.00 378.00,1438.00 378.00,1438.00 382.00,1429.00 382.00,1429.00 382.00,1429.00 383.00,1432.00 383.00,1432.00 383.00,1432.00 383.00,1425.00 383.00,1425.00 379.29,1424.28 379.34,1423.93 377.00,1421.00 377.00,1421.00 382.00,1424.00 382.00,1424.00 378.60,1419.65 372.61,1414.75 367.00,1414.00 367.00,1414.00 364.75,1390.07 364.75,1390.07 364.75,1390.07 369.00,1387.00 369.00,1387.00 369.00,1387.00 371.00,1382.00 371.00,1382.00 Z M 366.00,1391.00 C 366.00,1391.00 365.00,1391.00 365.00,1391.00 365.00,1391.00 366.00,1392.00 366.00,1392.00 366.00,1392.00 366.00,1391.00 366.00,1391.00 Z M 382.00,1433.00 C 382.00,1433.00 381.00,1433.00 381.00,1433.00 381.00,1433.00 382.00,1434.00 382.00,1434.00 382.00,1434.00 382.00,1433.00 382.00,1433.00 Z`,
    "Laborie": `M 302.00,1057.00 C 302.00,1057.00 304.00,1057.00 304.00,1057.00 304.00,1057.00 305.00,1059.00 305.00,1059.00 305.00,1059.00 304.00,1062.00 304.00,1062.00 314.76,1064.69 311.96,1070.61 314.00,1079.00 314.00,1079.00 313.00,1081.00 313.00,1081.00 313.00,1081.00 312.00,1082.00 312.00,1082.00 312.00,1082.00 308.00,1082.00 308.00,1082.00 309.18,1085.00 309.20,1092.67 308.96,1096.00 308.46,1100.12 306.54,1101.16 308.96,1105.00 309.03,1108.45 311.50,1111.97 308.96,1113.00 310.15,1115.70 310.14,1117.04 313.00,1118.00 312.64,1123.52 315.27,1128.68 321.00,1130.00 322.04,1133.69 324.29,1136.02 328.00,1137.00 328.00,1137.00 330.00,1144.00 330.00,1144.00 330.00,1144.00 332.00,1142.00 332.00,1142.00 332.00,1142.00 330.00,1146.00 330.00,1146.00 333.05,1150.15 332.00,1156.05 332.00,1161.00 329.58,1161.96 330.00,1162.52 330.00,1165.00 330.00,1165.00 328.00,1164.00 328.00,1164.00 328.54,1167.26 329.64,1174.76 327.00,1177.00 327.00,1177.00 328.00,1184.00 328.00,1184.00 328.00,1184.00 331.00,1184.00 331.00,1184.00 330.98,1187.58 331.27,1189.18 335.00,1190.00 335.01,1194.97 336.77,1194.99 339.63,1198.51 343.29,1203.02 345.35,1208.99 352.00,1209.00 353.45,1214.39 360.49,1221.70 365.00,1225.00 365.00,1225.00 364.00,1228.00 364.00,1228.00 364.00,1228.00 369.00,1230.00 369.00,1230.00 368.60,1235.91 369.88,1235.72 372.00,1241.00 372.00,1241.00 371.00,1241.00 371.00,1241.00 371.00,1241.00 369.00,1239.00 369.00,1239.00 369.00,1239.00 373.00,1245.00 373.00,1245.00 373.00,1245.00 372.00,1248.00 372.00,1248.00 380.37,1253.53 377.01,1261.63 377.00,1270.00 377.00,1270.00 378.10,1292.00 378.10,1292.00 378.10,1292.00 378.10,1312.00 378.10,1312.00 377.02,1323.86 375.08,1316.55 375.00,1334.00 375.00,1334.00 374.00,1348.00 374.00,1348.00 374.00,1348.00 374.00,1371.00 374.00,1371.00 373.98,1380.03 373.06,1376.28 372.00,1382.00 372.00,1382.00 369.00,1381.00 369.00,1381.00 369.00,1381.00 363.57,1392.00 363.57,1392.00 361.01,1401.14 364.49,1412.44 372.00,1418.00 372.00,1418.00 372.00,1416.00 372.00,1416.00 372.00,1416.00 378.00,1420.00 378.00,1420.00 375.22,1421.90 382.68,1425.35 379.85,1431.87 378.70,1434.52 372.65,1437.61 369.92,1438.45 367.39,1439.23 366.05,1438.37 365.00,1441.00 365.00,1441.00 344.83,1437.00 344.83,1437.00 347.22,1435.54 345.44,1433.31 344.83,1431.01 342.44,1424.48 342.04,1425.38 336.09,1423.50 336.09,1423.50 331.00,1422.00 331.00,1422.00 331.00,1422.00 331.00,1417.00 331.00,1417.00 331.00,1417.00 329.00,1419.00 329.00,1419.00 329.00,1419.00 329.00,1414.00 329.00,1414.00 329.00,1414.00 330.00,1402.00 330.00,1402.00 330.00,1402.00 321.00,1397.00 321.00,1397.00 321.15,1394.30 321.81,1392.10 319.00,1391.00 322.10,1378.74 316.90,1382.27 312.00,1376.00 312.00,1376.00 308.00,1377.00 308.00,1377.00 308.00,1377.00 308.00,1375.00 308.00,1375.00 300.56,1376.81 291.75,1375.32 288.05,1376.31 283.33,1377.59 283.55,1382.38 280.08,1383.15 277.76,1383.66 276.83,1381.63 276.00,1380.00 276.00,1380.00 273.00,1381.00 273.00,1381.00 273.00,1381.00 274.00,1378.00 274.00,1378.00 271.45,1378.08 270.82,1378.56 270.00,1376.00 270.00,1376.00 266.00,1377.05 266.00,1377.05 261.37,1373.61 260.43,1375.86 255.84,1377.05 253.57,1377.72 252.02,1376.78 251.00,1379.00 251.00,1379.00 245.00,1379.00 245.00,1379.00 245.00,1379.00 243.00,1372.01 243.00,1372.01 243.00,1372.01 237.00,1372.01 237.00,1372.01 237.00,1372.01 229.00,1373.43 229.00,1373.43 229.00,1373.43 216.04,1372.78 216.04,1372.78 216.04,1372.78 206.91,1367.99 206.91,1367.99 206.91,1367.99 197.09,1366.58 197.09,1366.58 197.09,1366.58 190.68,1363.03 190.68,1363.03 190.68,1363.03 184.00,1361.00 184.00,1361.00 184.90,1359.23 181.12,1356.53 179.73,1355.37 173.54,1350.16 168.52,1352.50 165.32,1351.50 163.66,1350.99 161.49,1349.06 160.00,1348.00 160.00,1348.00 161.00,1339.00 161.00,1339.00 168.18,1335.51 167.86,1324.98 178.00,1328.00 175.79,1323.06 177.11,1316.23 183.00,1315.00 183.00,1315.00 184.00,1311.00 184.00,1311.00 184.00,1311.00 187.00,1313.00 187.00,1313.00 187.00,1313.00 188.00,1297.00 188.00,1297.00 188.00,1297.00 190.00,1298.00 190.00,1298.00 190.00,1298.00 193.00,1280.00 193.00,1280.00 195.42,1279.04 195.00,1278.48 195.00,1276.00 199.33,1274.91 202.99,1270.41 203.00,1266.00 205.51,1265.08 204.88,1264.20 204.00,1262.00 204.00,1262.00 207.81,1258.00 207.81,1258.00 205.41,1256.97 207.21,1254.28 207.81,1252.00 208.87,1245.19 206.43,1242.80 210.00,1236.00 210.00,1236.00 208.87,1235.23 208.87,1235.23 208.87,1235.23 208.87,1226.00 208.87,1226.00 208.87,1226.00 215.37,1216.51 215.37,1216.51 215.37,1216.51 238.00,1194.00 238.00,1194.00 238.00,1194.00 242.00,1196.00 242.00,1196.00 242.00,1196.00 241.00,1191.00 241.00,1191.00 241.00,1191.00 243.00,1193.00 243.00,1193.00 243.00,1193.00 244.00,1190.00 244.00,1190.00 244.00,1190.00 242.00,1190.00 242.00,1190.00 242.00,1190.00 243.00,1187.00 243.00,1187.00 243.00,1187.00 245.00,1189.00 245.00,1189.00 245.00,1189.00 244.00,1186.00 244.00,1186.00 244.00,1186.00 248.00,1176.00 248.00,1176.00 248.00,1176.00 246.00,1177.00 246.00,1177.00 246.00,1177.00 248.00,1169.00 248.00,1169.00 248.00,1169.00 249.00,1173.00 249.00,1173.00 249.00,1173.00 248.00,1161.00 248.00,1161.00 248.00,1161.00 252.00,1156.00 252.00,1156.00 252.00,1156.00 250.00,1156.00 250.00,1156.00 250.00,1156.00 251.00,1153.00 251.00,1153.00 251.00,1153.00 253.00,1155.00 253.00,1155.00 253.00,1155.00 252.00,1152.00 252.00,1152.00 252.00,1152.00 253.00,1149.00 253.00,1149.00 256.59,1150.03 263.89,1140.90 266.00,1138.00 266.00,1138.00 265.00,1135.00 265.00,1135.00 267.39,1135.84 266.46,1134.09 266.00,1132.00 273.41,1125.38 269.38,1122.30 271.70,1116.18 273.55,1111.32 276.99,1112.39 277.00,1106.00 279.67,1104.95 279.11,1103.63 279.00,1101.00 279.00,1101.00 281.00,1094.00 281.00,1094.00 281.00,1094.00 282.00,1096.00 282.00,1096.00 282.54,1089.35 283.06,1082.93 286.58,1077.09 286.58,1077.09 294.00,1068.00 294.00,1068.00 294.00,1068.00 290.00,1068.00 290.00,1068.00 292.63,1065.61 292.76,1065.55 293.00,1062.00 295.72,1060.79 296.29,1060.97 297.00,1058.00 297.00,1058.00 302.00,1060.00 302.00,1060.00 302.00,1060.00 301.00,1058.00 301.00,1058.00 301.00,1058.00 302.00,1057.00 302.00,1057.00 Z M 314.00,1075.00 C 314.00,1075.00 315.00,1075.00 315.00,1075.00 315.00,1075.00 314.00,1076.00 314.00,1076.00 314.00,1076.00 314.00,1075.00 314.00,1075.00 Z M 312.00,1080.00 C 312.00,1080.00 311.00,1080.00 311.00,1080.00 311.00,1080.00 312.00,1081.00 312.00,1081.00 312.00,1081.00 312.00,1080.00 312.00,1080.00 Z M 281.00,1087.00 C 281.00,1087.00 282.00,1087.00 282.00,1087.00 282.00,1087.00 281.00,1088.00 281.00,1088.00 281.00,1088.00 281.00,1087.00 281.00,1087.00 Z M 308.00,1091.00 C 308.00,1091.00 308.00,1096.00 308.00,1096.00 308.00,1096.00 308.00,1091.00 308.00,1091.00 Z M 269.00,1118.00 C 269.00,1118.00 270.00,1118.00 270.00,1118.00 270.00,1118.00 269.00,1119.00 269.00,1119.00 269.00,1119.00 269.00,1118.00 269.00,1118.00 Z M 330.00,1162.00 C 330.00,1162.00 331.00,1162.00 331.00,1162.00 331.00,1162.00 330.00,1163.00 330.00,1163.00 330.00,1163.00 330.00,1162.00 330.00,1162.00 Z M 235.00,1199.00 C 235.00,1199.00 234.00,1199.00 234.00,1199.00 234.00,1199.00 235.00,1200.00 235.00,1200.00 235.00,1200.00 235.00,1199.00 235.00,1199.00 Z M 234.00,1200.00 C 234.00,1200.00 233.00,1200.00 233.00,1200.00 233.00,1200.00 234.00,1201.00 234.00,1201.00 234.00,1201.00 234.00,1200.00 234.00,1200.00 Z M 233.00,1201.00 C 233.00,1201.00 232.00,1201.00 232.00,1201.00 232.00,1201.00 233.00,1202.00 233.00,1202.00 233.00,1202.00 233.00,1201.00 233.00,1201.00 Z M 232.00,1202.00 C 232.00,1202.00 231.00,1202.00 231.00,1202.00 231.00,1202.00 232.00,1203.00 232.00,1203.00 232.00,1203.00 232.00,1202.00 232.00,1202.00 Z M 231.00,1203.00 C 231.00,1203.00 230.00,1203.00 230.00,1203.00 230.00,1203.00 231.00,1204.00 231.00,1204.00 231.00,1204.00 231.00,1203.00 231.00,1203.00 Z M 230.00,1204.00 C 230.00,1204.00 229.00,1204.00 229.00,1204.00 229.00,1204.00 230.00,1205.00 230.00,1205.00 230.00,1205.00 230.00,1204.00 230.00,1204.00 Z M 229.00,1205.00 C 229.00,1205.00 228.00,1205.00 228.00,1205.00 228.00,1205.00 229.00,1206.00 229.00,1206.00 229.00,1206.00 229.00,1205.00 229.00,1205.00 Z M 228.00,1206.00 C 228.00,1206.00 227.00,1206.00 227.00,1206.00 227.00,1206.00 228.00,1207.00 228.00,1207.00 228.00,1207.00 228.00,1206.00 228.00,1206.00 Z M 227.00,1207.00 C 227.00,1207.00 226.00,1207.00 226.00,1207.00 226.00,1207.00 227.00,1208.00 227.00,1208.00 227.00,1208.00 227.00,1207.00 227.00,1207.00 Z M 226.00,1208.00 C 226.00,1208.00 225.00,1208.00 225.00,1208.00 225.00,1208.00 226.00,1209.00 226.00,1209.00 226.00,1209.00 226.00,1208.00 226.00,1208.00 Z M 225.00,1209.00 C 225.00,1209.00 224.00,1209.00 224.00,1209.00 224.00,1209.00 225.00,1210.00 225.00,1210.00 225.00,1210.00 225.00,1209.00 225.00,1209.00 Z M 224.00,1210.00 C 224.00,1210.00 223.00,1210.00 223.00,1210.00 223.00,1210.00 224.00,1211.00 224.00,1211.00 224.00,1211.00 224.00,1210.00 224.00,1210.00 Z M 223.00,1211.00 C 223.00,1211.00 222.00,1211.00 222.00,1211.00 222.00,1211.00 223.00,1212.00 223.00,1212.00 223.00,1212.00 223.00,1211.00 223.00,1211.00 Z M 222.00,1212.00 C 222.00,1212.00 221.00,1212.00 221.00,1212.00 221.00,1212.00 222.00,1213.00 222.00,1213.00 222.00,1213.00 222.00,1212.00 222.00,1212.00 Z M 221.00,1213.00 C 221.00,1213.00 220.00,1213.00 220.00,1213.00 220.00,1213.00 221.00,1214.00 221.00,1214.00 221.00,1214.00 221.00,1213.00 221.00,1213.00 Z M 220.00,1214.00 C 220.00,1214.00 219.00,1214.00 219.00,1214.00 219.00,1214.00 220.00,1215.00 220.00,1215.00 220.00,1215.00 220.00,1214.00 220.00,1214.00 Z M 219.00,1215.00 C 219.00,1215.00 218.00,1215.00 218.00,1215.00 218.00,1215.00 219.00,1216.00 219.00,1216.00 219.00,1216.00 219.00,1215.00 219.00,1215.00 Z M 218.00,1216.00 C 218.00,1216.00 217.00,1216.00 217.00,1216.00 217.00,1216.00 218.00,1217.00 218.00,1217.00 218.00,1217.00 218.00,1216.00 218.00,1216.00 Z M 217.00,1217.00 C 217.00,1217.00 216.00,1217.00 216.00,1217.00 216.00,1217.00 217.00,1218.00 217.00,1218.00 217.00,1218.00 217.00,1217.00 217.00,1217.00 Z M 189.00,1292.00 C 189.00,1292.00 190.00,1292.00 190.00,1292.00 190.00,1292.00 189.00,1293.00 189.00,1293.00 189.00,1293.00 189.00,1292.00 189.00,1292.00 Z M 182.00,1316.00 C 182.00,1316.00 181.00,1316.00 181.00,1316.00 181.00,1316.00 182.00,1317.00 182.00,1317.00 182.00,1317.00 182.00,1316.00 182.00,1316.00 Z M 374.00,1323.00 C 372.54,1326.69 372.54,1331.31 374.00,1335.00 374.00,1335.00 374.00,1323.00 374.00,1323.00 Z M 174.00,1328.00 C 174.00,1328.00 173.00,1328.00 173.00,1328.00 173.00,1328.00 174.00,1329.00 174.00,1329.00 174.00,1329.00 174.00,1328.00 174.00,1328.00 Z M 173.00,1329.00 C 173.00,1329.00 172.00,1329.00 172.00,1329.00 172.00,1329.00 173.00,1330.00 173.00,1330.00 173.00,1330.00 173.00,1329.00 173.00,1329.00 Z M 172.00,1330.00 C 172.00,1330.00 171.00,1330.00 171.00,1330.00 171.00,1330.00 172.00,1331.00 172.00,1331.00 172.00,1331.00 172.00,1330.00 172.00,1330.00 Z M 171.00,1331.00 C 171.00,1331.00 170.00,1331.00 170.00,1331.00 170.00,1331.00 171.00,1332.00 171.00,1332.00 171.00,1332.00 171.00,1331.00 171.00,1331.00 Z M 170.00,1332.00 C 170.00,1332.00 169.00,1332.00 169.00,1332.00 169.00,1332.00 170.00,1333.00 170.00,1333.00 170.00,1333.00 170.00,1332.00 170.00,1332.00 Z M 169.00,1333.00 C 169.00,1333.00 168.00,1333.00 168.00,1333.00 168.00,1333.00 169.00,1334.00 169.00,1334.00 169.00,1334.00 169.00,1333.00 169.00,1333.00 Z M 161.00,1337.00 C 161.00,1337.00 162.00,1337.00 162.00,1337.00 162.00,1337.00 161.00,1338.00 161.00,1338.00 161.00,1338.00 161.00,1337.00 161.00,1337.00 Z M 159.00,1340.00 C 159.00,1340.00 160.00,1340.00 160.00,1340.00 160.00,140.00 159.00,1341.00 159.00,1341.00 159.00,1341.00 159.00,1340.00 159.00,1340.00 Z M 159.00,1342.00 C 159.00,1342.00 160.00,1342.00 160.00,1342.00 160.00,1342.00 159.00,1343.00 159.00,1343.00 159.00,1343.00 159.00,142.00 159.00,1342.00 Z M 177.00,1352.00 C 177.00,1352.00 176.00,1352.00 176.00,1352.00 176.00,1352.00 177.00,1353.00 177.00,1353.00 177.00,1353.00 177.00,1352.00 177.00,1352.00 Z M 255.00,1376.00 C 255.00,1376.00 254.00,1376.00 254.00,1376.00 254.00,1376.00 255.00,1377.00 255.00,1377.00 255.00,1377.00 255.00,1376.00 255.00,1376.00 Z M 318.00,1378.00 C 318.00,1378.00 317.00,1378.00 317.00,1378.00 317.00,1378.00 318.00,1379.00 318.00,1379.00 318.00,1379.00 318.00,1378.00 318.00,1378.00 Z`,
    "Choiseul": `M 301.00,1030.00 C 301.00,1030.00 303.00,1030.00 303.00,1030.00 303.00,1030.00 292.13,1053.00 292.13,1053.00 292.13,1053.00 289.00,1068.00 289.00,1068.00 283.27,1068.13 278.83,1073.72 277.47,1079.00 277.47,1079.00 276.00,1089.00 276.00,1089.00 276.00,1089.00 273.85,1101.00 273.85,1101.00 271.71,1106.13 267.78,1108.49 266.02,1112.00 264.99,1114.06 263.09,1125.42 263.13,1128.00 263.28,1136.94 259.90,1133.94 254.23,1141.01 252.33,1143.37 248.90,1151.90 248.00,1155.00 243.86,1156.24 243.17,1158.95 243.02,1163.00 243.02,1163.00 243.68,1172.00 243.68,1172.00 244.27,1179.94 240.29,1187.12 237.00,1194.00 237.00,1194.00 229.93,1200.43 229.93,1200.43 229.93,1200.43 213.22,1218.00 213.22,1218.00 213.22,1218.00 205.00,1231.00 205.00,1231.00 207.17,1238.63 204.10,1253.82 203.00,1262.00 197.81,1262.12 193.66,1268.86 191.13,1273.00 186.75,1280.15 184.61,1287.82 183.26,1296.00 182.08,1303.10 182.69,1309.38 179.00,1316.00 176.33,1316.91 176.55,1317.31 176.00,1320.00 176.00,1320.00 173.00,1321.00 173.00,1321.00 172.96,1324.68 172.49,1325.21 169.94,1328.00 159.53,1339.35 155.43,1330.88 145.00,1325.50 145.00,1325.50 125.26,1313.69 125.26,1313.69 122.71,1311.30 121.79,1307.73 118.74,1304.00 117.16,1302.07 113.73,1298.93 112.55,1297.00 110.75,1293.20 113.72,1291.01 112.55,1287.00 111.34,1283.85 107.34,1280.46 105.05,1278.00 100.90,1273.54 101.06,1271.88 96.00,1268.00 102.53,1280.67 114.18,1284.77 109.00,1293.00 108.75,1280.89 97.77,1282.21 95.00,1269.12 95.00,1269.12 86.10,1269.12 86.10,1269.12 86.10,1269.12 75.83,1255.00 75.83,1255.00 75.83,1255.00 63.00,1244.00 63.00,1244.00 76.53,1246.84 78.64,1256.88 84.00,1263.00 84.00,1263.00 83.00,1266.00 83.00,1266.00 83.00,1266.00 89.00,1269.00 89.00,1269.00 89.00,1269.00 84.60,1262.00 84.60,1262.00 84.60,1262.00 80.69,1254.00 80.69,1254.00 80.69,1254.00 67.00,1243.01 67.00,1243.01 67.00,1243.01 61.00,1240.98 61.00,1240.98 61.00,1240.98 51.00,1234.00 51.00,1234.00 51.00,1234.00 59.00,1244.00 59.00,1244.00 59.00,1244.00 55.01,1242.41 55.01,1242.41 55.01,1242.41 44.07,1232.97 44.07,1232.97 44.07,1232.97 44.07,1230.00 44.07,1230.00 44.07,1230.00 49.00,1235.00 49.00,1235.00 46.70,1231.39 43.04,1225.30 42.72,1221.00 42.31,1215.50 44.63,1210.39 45.00,1205.00 45.00,1205.00 43.00,1206.00 43.00,1206.00 43.00,1206.00 43.00,1192.00 43.00,1192.00 43.00,1192.00 47.00,1197.00 47.00,1197.00 47.00,1197.00 49.00,1186.00 49.00,1186.00 49.00,1186.00 52.00,1187.00 52.00,1187.00 52.00,1187.00 53.00,1184.00 53.00,1184.00 53.00,1184.00 56.00,1185.00 56.00,1185.00 58.02,1182.14 58.66,1182.42 62.00,1183.00 62.00,1183.00 62.00,1179.00 62.00,1179.00 64.31,1177.41 68.51,1174.91 70.04,1172.74 73.99,1167.11 75.12,1161.02 82.00,1156.60 85.03,1154.65 86.68,1155.42 90.00,1153.42 94.84,1150.51 97.81,1147.02 104.00,1145.47 109.47,1144.10 113.79,1146.47 120.00,1142.85 132.26,1135.72 131.61,1125.03 149.00,1125.00 157.25,1124.98 168.85,1124.17 175.00,1118.00 178.20,1117.78 191.93,1116.72 194.00,1115.85 194.00,1115.85 214.00,1100.44 214.00,1100.44 214.00,1100.44 224.00,1093.56 224.00,1093.56 224.00,1093.56 248.00,1074.45 248.00,1074.45 248.00,1074.45 265.00,1061.00 265.00,1061.00 265.00,1061.00 271.55,1055.55 271.55,1055.55 271.55,1055.55 276.13,1050.00 276.13,1050.00 276.13,1050.00 284.82,1041.09 284.82,1041.09 289.75,1035.89 292.06,1031.89 300.00,1033.00 300.00,1033.00 301.00,1030.00 301.00,1030.00 Z M 290.00,1063.00 C 290.00,1063.00 289.00,1063.00 289.00,1063.00 289.00,1063.00 290.00,1064.00 290.00,1064.00 290.00,1064.00 290.00,1063.00 290.00,1063.00 Z M 250.00,1147.00 C 250.00,1147.00 249.00,1147.00 249.00,1147.00 249.00,1147.00 250.00,1148.00 250.00,1148.00 250.00,1148.00 250.00,1147.00 250.00,1147.00 Z M 248.00,1151.00 C 248.00,1151.00 247.00,1151.00 247.00,1151.00 247.00,1151.00 248.00,1152.00 248.00,1152.00 248.00,1152.00 248.00,1151.00 248.00,1151.00 Z M 239.00,1188.00 C 239.00,1188.00 238.00,1188.00 238.00,1188.00 238.00,1188.00 239.00,1189.00 239.00,1189.00 239.00,1189.00 239.00,1188.00 239.00,1188.00 Z M 238.00,1189.00 C 238.00,1189.00 237.00,1189.00 237.00,1189.00 237.00,1189.00 238.00,1190.00 238.00,1190.00 238.00,1190.00 238.00,1189.00 238.00,1189.00 Z M 233.00,1196.00 C 233.00,1196.00 232.00,1196.00 232.00,1196.00 232.00,1196.00 233.00,1197.00 233.00,1197.00 233.00,1197.00 233.00,1196.00 233.00,1196.00 Z M 47.00,1198.00 C 47.00,1198.00 44.00,1203.00 44.00,1203.00 44.00,1203.00 45.00,1204.00 45.00,1204.00 45.00,1204.00 47.00,1198.00 47.00,1198.00 Z M 212.00,1217.00 C 212.00,1217.00 211.00,1217.00 211.00,1217.00 211.00,1217.00 212.00,1218.00 212.00,1218.00 212.00,1218.00 212.00,1217.00 212.00,1217.00 Z M 210.00,1221.00 C 210.00,1221.00 209.00,1221.00 209.00,1221.00 209.00,1221.00 210.00,1222.00 210.00,1222.00 210.00,1222.00 210.00,1221.00 210.00,1221.00 Z M 208.00,1225.00 C 208.00,1225.00 207.00,1225.00 207.00,1225.00 207.00,1225.00 208.00,1226.00 208.00,1226.00 208.00,1226.00 208.00,1225.00 208.00,1225.00 Z`,
    "Soufriere": `M 29.00,836.00 C 31.34,835.45 33.59,833.79 36.00,833.86 38.62,833.93 45.36,837.68 48.00,839.00 48.00,839.00 75.00,852.46 75.00,852.46 76.99,853.04 78.95,852.99 81.00,853.00 81.00,853.00 96.00,852.14 96.00,852.14 96.00,852.14 113.00,856.13 113.00,856.13 124.41,859.02 122.92,863.81 129.09,868.49 130.96,869.91 133.81,871.71 135.00,869.00 135.00,869.00 142.90,870.05 142.90,870.05 142.90,870.05 149.00,874.00 149.00,874.00 148.76,876.74 148.18,877.98 151.00,879.00 151.21,883.11 152.89,884.79 157.00,885.00 157.00,885.00 156.00,887.00 156.00,887.00 159.98,885.69 160.90,885.77 163.00,882.00 167.81,880.39 167.71,873.68 173.04,871.13 175.38,870.20 181.06,871.00 184.00,871.13 184.00,871.13 196.00,869.94 196.00,869.94 200.28,870.99 209.19,881.03 211.35,885.00 211.35,885.00 215.00,894.00 215.00,894.00 215.00,894.00 216.00,891.00 216.00,891.00 216.00,891.00 211.00,915.00 211.00,915.00 208.91,916.05 209.60,917.84 209.89,920.01 210.77,926.64 213.96,928.86 217.87,934.00 217.87,934.00 228.70,948.00 228.70,948.00 232.01,953.09 231.79,954.94 233.84,959.00 233.84,959.00 240.81,970.00 240.81,970.00 244.03,975.98 242.94,979.35 248.52,985.95 253.47,991.81 264.02,994.55 270.00,989.00 281.98,989.74 293.01,976.35 298.43,967.00 298.43,967.00 305.60,955.43 305.60,955.43 308.02,950.98 308.57,947.86 311.98,943.00 315.38,938.15 323.51,930.49 328.00,926.00 332.71,921.29 337.48,914.92 344.00,913.00 348.29,925.78 350.47,929.74 361.00,938.79 367.17,944.10 379.19,951.71 379.40,961.00 379.51,966.14 374.35,967.85 373.00,973.00 373.00,973.00 370.00,974.00 370.00,974.00 369.72,979.03 367.01,979.99 364.40,984.01 364.40,984.01 361.11,989.72 361.11,989.72 361.11,989.72 355.75,996.01 355.75,996.01 355.75,996.01 350.01,1004.83 350.01,1004.83 347.54,1008.50 346.11,1008.24 345.00,1013.00 345.00,1013.00 335.15,1025.17 335.15,1025.17 335.15,1025.17 335.15,1028.00 335.15,1028.00 335.15,1028.00 322.00,1031.20 322.00,1031.20 322.00,1031.20 310.00,1029.00 310.00,1029.00 310.00,1029.00 311.00,1027.00 311.00,1027.00 305.39,1027.52 305.00,1028.26 300.00,1030.27 283.99,1036.70 282.17,1041.96 270.00,1052.83 270.00,1052.83 253.00,1066.45 253.00,1066.45 253.00,1066.45 216.00,1095.23 216.00,1095.23 216.00,1095.23 202.17,1105.51 202.17,1105.51 197.07,1109.96 191.48,1116.35 183.99,1115.70 180.70,1115.42 177.15,1114.91 174.00,1114.00 173.15,1115.45 173.17,1115.86 171.71,1117.01 169.95,1118.39 155.24,1123.86 152.96,1124.00 148.46,1124.03 142.51,1121.68 137.00,1124.00 132.44,1126.08 131.63,1128.62 128.63,1131.82 125.87,1134.76 116.85,1141.44 113.00,1142.50 109.16,1143.56 104.17,1142.39 100.00,1143.65 95.45,1145.02 92.01,1148.52 88.00,1150.87 85.52,1152.32 82.02,1152.41 81.00,1155.00 76.83,1155.89 75.53,1156.66 75.00,1161.00 75.00,1161.00 61.49,1178.79 61.49,1178.79 61.49,1178.79 40.00,1190.00 40.00,1190.00 40.00,1190.00 37.00,1189.00 37.00,1189.00 37.00,1189.00 37.00,1186.00 37.00,1186.00 37.00,1186.00 33.00,1186.00 33.00,1186.00 33.00,1186.00 28.00,1184.00 28.00,1184.00 28.00,1184.00 30.00,1183.00 30.00,1183.00 30.00,1183.00 25.00,1183.00 25.00,1183.00 25.00,1183.00 24.00,1180.00 24.00,1180.00 24.00,1180.00 21.00,1181.00 21.00,1181.00 21.00,1181.00 19.00,1180.00 19.00,1180.00 19.00,1180.00 20.00,1178.00 20.00,1178.00 20.00,1178.00 17.00,1179.00 17.00,1179.00 14.29,1174.19 12.52,1173.04 8.00,1170.00 8.00,1170.00 10.18,1161.01 10.18,1161.01 10.18,1161.01 19.00,1151.00 19.00,1151.00 22.50,1150.04 24.08,1148.51 25.00,1145.00 25.00,1145.00 27.00,1142.00 27.00,1142.00 31.00,1140.77 33.65,1136.80 35.00,1133.00 35.00,1133.00 40.00,1129.00 40.00,1129.00 40.00,1129.00 51.00,1126.00 51.00,1126.00 51.00,1126.00 51.00,1123.00 51.00,1123.00 51.00,1123.00 62.00,1112.00 62.00,1112.00 62.00,1112.00 64.00,1108.00 64.00,1108.00 64.00,1108.00 63.00,1102.00 63.00,1102.00 63.00,1102.00 61.00,1097.00 61.00,1097.00 61.63,1092.65 62.00,1091.36 59.00,1088.00 59.00,1088.00 53.00,1086.00 53.00,1086.00 52.17,1083.24 50.02,1081.56 48.68,1078.98 45.10,1072.13 45.35,1069.15 46.25,1062.00 46.54,1059.63 46.36,1057.40 47.87,1055.35 50.10,1052.32 53.48,1052.67 55.69,1051.08 57.39,1049.86 58.07,1047.79 59.00,1046.00 59.00,1046.00 60.00,1048.00 60.00,1048.00 61.48,1044.64 63.92,1041.64 64.85,1038.00 64.85,1038.00 64.85,1023.00 64.85,1023.00 66.03,1018.06 69.23,1015.46 69.00,1006.00 69.00,1006.00 74.00,1000.00 74.00,1000.00 75.85,999.31 76.27,998.93 77.04,996.91 79.86,989.50 72.60,986.48 69.93,981.96 68.66,979.81 68.35,977.42 68.00,975.00 68.00,975.00 62.00,977.00 62.00,977.00 62.00,977.00 49.00,978.77 49.00,978.77 49.00,978.77 40.00,974.00 40.00,974.00 39.80,971.22 39.71,970.77 37.00,970.00 37.00,970.00 35.00,967.00 35.00,967.00 33.73,961.12 23.97,960.73 19.00,961.00 15.62,957.94 9.50,956.72 5.00,957.00 6.06,951.32 7.81,949.84 8.26,947.00 8.91,942.93 6.06,936.49 4.00,933.00 10.63,922.19 4.47,909.63 4.82,901.00 4.99,896.53 5.89,888.24 6.92,884.01 6.92,884.01 9.00,877.00 9.00,877.00 16.91,869.84 15.60,864.97 18.00,859.00 18.00,859.00 19.00,863.00 19.00,863.00 19.00,863.00 20.00,851.00 20.00,851.00 24.68,849.56 28.44,840.52 29.00,836.00 Z M 80.00,851.00 C 80.00,851.00 81.00,851.00 81.00,851.00 81.00,851.00 80.00,852.00 80.00,852.00 80.00,852.00 80.00,851.00 80.00,851.00 Z M 12.00,956.00 C 12.00,956.00 11.00,956.00 11.00,956.00 11.00,956.00 12.00,957.00 12.00,957.00 12.00,957.00 12.00,956.00 12.00,956.00 Z M 244.00,976.00 C 244.00,976.00 245.00,976.00 245.00,976.00 245.00,976.00 244.00,977.00 244.00,977.00 244.00,977.00 244.00,976.00 244.00,976.00 Z M 288.00,1034.00 C 288.00,1034.00 287.00,1034.00 287.00,1034.00 287.00,1034.00 288.00,1035.00 288.00,1035.00 288.00,1035.00 288.00,1034.00 288.00,1034.00 Z M 287.00,1035.00 C 287.00,1035.00 286.00,1035.00 286.00,1035.00 286.00,1035.00 287.00,1036.00 287.00,1036.00 287.00,1036.00 287.00,1035.00 287.00,1035.00 Z M 286.00,1036.00 C 286.00,1036.00 285.00,1036.00 285.00,1036.00 285.00,1036.00 286.00,1037.00 286.00,1037.00 286.00,1037.00 286.00,1036.00 286.00,1036.00 Z M 285.00,1037.00 C 285.00,1037.00 284.00,1037.00 284.00,1037.00 284.00,1037.00 285.00,1038.00 285.00,1038.00 285.00,1038.00 285.00,1037.00 285.00,1037.00 Z M 284.00,1038.00 C 284.00,1038.00 283.00,1038.00 283.00,1038.00 283.00,1038.00 284.00,1039.00 284.00,1039.00 284.00,1039.00 284.00,1038.00 284.00,1038.00 Z M 283.00,1039.00 C 283.00,1039.00 282.00,1039.00 282.00,1039.00 282.00,1039.00 283.00,1040.00 283.00,1040.00 283.00,1040.00 283.00,1039.00 283.00,1039.00 Z M 60.00,1116.00 C 60.00,1116.00 59.00,1116.00 59.00,1116.00 59.00,1116.00 60.00,1117.00 60.00,1117.00 60.00,1117.00 60.00,1116.00 60.00,1116.00 Z M 49.00,1126.00 C 49.00,1126.00 48.00,1126.00 48.00,1126.00 48.00,1126.00 49.00,1127.00 49.00,1127.00 49.00,1127.00 49.00,1126.00 49.00,1126.00 Z M 46.00,1186.00 C 46.00,1186.00 45.00,1186.00 45.00,1186.00 45.00,1186.00 46.00,1187.00 46.00,1187.00 46.00,1187.00 46.00,1186.00 46.00,1186.00 Z`
};

export function InteractiveSvgMap({ constituencies, selectedConstituencyId, election, onConstituencyClick, onLeaningChange, onPredictionChange, electionResults, previousElectionResults, previousElection, partyLogos, isMakeYourOwn, hideLogos, popoverVariant }: InteractiveSvgMapProps) {
    const constituencyMap = useMemo(() => {
        const map = new Map<string, Constituency>();
        const anseLaRayeCanariesId = '4CRZlKXDXQCBPzvXjYeD';

        const anseLaRayeConstituency = constituencies.find(c => c.id === anseLaRayeCanariesId);
        if (anseLaRayeConstituency) {
            map.set("Anse-La-Raye/Canaries", anseLaRayeConstituency);
        } else {
            // Create a fallback if not found in Firestore
            const fallback: Constituency = {
                id: anseLaRayeCanariesId,
                name: 'Anse-la-Raye/Canaries',
                demographics: { registeredVoters: 0 },
                politicalLeaning: isMakeYourOwn ? 'unselected' : 'tossup',
            };
            map.set("Anse-La-Raye/Canaries", fallback);
        }

        const remainingConstituencies = constituencies.filter(c => c.id !== anseLaRayeCanariesId);

        for (const constituency of remainingConstituencies) {
            map.set(constituency.name, constituency);
        }

        // Ensure all 17 constituencies from SVGPaths are in the map
        for (const name in SVGPaths) {
            if (!map.has(name) && name !== "Anse-La-Raye/Canaries") {
                 const fallback: Constituency = {
                    id: name, // Use name as a fallback ID
                    name: name,
                    demographics: { registeredVoters: 0 },
                    politicalLeaning: isMakeYourOwn ? 'unselected' : 'tossup',
                };
                map.set(name, fallback);
            }
        }
        
        return map;
    }, [constituencies, isMakeYourOwn]);

    return (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            version="1.1"
            width="100%"
            height="100%"
            viewBox="0 0 800 1533"
        >
            <defs>
                <pattern id="stripes" patternUnits="userSpaceOnUse" width="10" height="10" patternTransform="rotate(45)">
                    <rect width="10" height="10" fill="#2980B9"></rect>
                    <line x1="0" y1="0" x2="0" y2="10" stroke="#E74C3C" strokeWidth="6"></line>
                </pattern>
                <pattern id="red-white-stripes" patternUnits="userSpaceOnUse" width="10" height="10" patternTransform="rotate(45)">
                    <rect width="10" height="10" fill="#E74C3C"></rect>
                    <line x1="0" y1="0" x2="0" y2="10" stroke="white" strokeWidth="6"></line>
                </pattern>
            </defs>
            {Object.entries(SVGPaths).map(([name, pathData]) => {
                const constituency = constituencyMap.get(name);
                if (!constituency) return null;
                
                const electionYear = election?.year;
                const isSpecialYear = electionYear === 2021 || election?.isCurrent;

                const result = electionResults?.find(r => r.constituencyId === constituency.id);
                const slpWon = result && result.slpVotes > result.uwpVotes;
                
                let isStriped = false;
                let stripesId = "stripes";
                
                if (isSpecialYear) {
                    if (name === 'Castries North') {
                        isStriped = true;
                        stripesId = "stripes";
                    } else if (name === 'Castries Central') {
                        isStriped = true;
                        stripesId = "red-white-stripes";
                    }
                }
                
                const { color: leaningColor } = getLeaningInfo(constituency.politicalLeaning, isMakeYourOwn);
                const isSelected = constituency.id === selectedConstituencyId;

                return (
                    <Popover key={constituency.id}>
                        <PopoverTrigger asChild>
                            <path
                                d={pathData}
                                id={constituency.name}
                                className={cn(
                                    "cursor-pointer transition-all duration-300",
                                    "stroke-white stroke-2 hover:stroke-black hover:stroke-[4]",
                                    isSelected ? "stroke-black stroke-[4]" : ""
                                )}
                                style={{ fill: isStriped ? `url(#${stripesId})` : leaningColor }}
                                onClick={() => onConstituencyClick(constituency.id)}
                            />
                        </PopoverTrigger>
                        <PopoverContent className="w-auto" side="right">
                           <ConstituencyPopoverContent 
                                constituency={constituency}
                                election={election}
                                onLeaningChange={onLeaningChange ? (leaning) => onLeaningChange(constituency.id, leaning) : undefined}
                                onPredictionChange={onPredictionChange ? (slp, uwp) => onPredictionChange(constituency.id, slp, uwp) : undefined}
                                electionResults={electionResults}
                                previousElectionResults={previousElectionResults}
                                previousElection={previousElection}
                                partyLogos={partyLogos}
                                isMakeYourOwn={isMakeYourOwn}
                                hideLogos={hideLogos}
                                popoverVariant={popoverVariant}
                           />
                        </PopoverContent>
                    </Popover>
                );
            })}
        </svg>
    );
}
